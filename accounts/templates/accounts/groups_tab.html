{% extends "base.html" %}

{% block title %}Groups{% endblock %}

{% block content %}
<h2>Groups</h2>
<a href="{% url 'accounts:export_groups_to_csv' %}" class="btn btn-secondary mb-3">Download as CSV</a>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Group Name</th>
            <th>Members</th>
        </tr>
    </thead>
    <tbody>
        {% for group in groups %}
        <tr>
            <td>{{ group.name }}</td>
            <td>
                <ul class="list-unstyled">
                    {% for member in group.members.all %}
                    <li>{{ member.name }} ({{ member.email }}, {{ member.phone }})</li>
                    {% endfor %}
                </ul>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="2" class="text-center">No groups available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
